name: CI/CD

on: [push, pull_request]

env:
  TEST_REPOSITORY: test-website-deployment
  TARGET_REPOSITORY: website-deployment

  # we want to load this from env to escape quotes
  HEAD_COMMIT_MESSAGE: ${{ github.event.head_commit.message }}

jobs:
  build-deploy:
    runs-on: ubuntu-latest
    container:
      image: ntoss/builder:latest
    steps:
      # Saving branch name to ${BRANCH_NAME}
      - uses: nelonoel/branch-name@v1
      - run: |
          git config --global user.email "action@flowbrew.ru"
          git config --global user.name "GitHub Action"
      - uses: actions/checkout@v1
